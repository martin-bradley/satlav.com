<!DOCTYPE HTML>
<html>
<head>
  <title>Sat Lav - Coverage</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="assets/css/main.css" />
  <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

  <!-- Leaflet (CDN) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    /* Page-specific */
    .sl-map-wrap {
      position: relative;
      width: 100%;
      height: 70vh;
      min-height: 520px;
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.10);
      box-shadow: 0 10px 26px rgba(0,0,0,0.08);
      background: rgba(0,0,0,0.02);
    }
    #coverageMap { height: 100%; width: 100%; }

    /* Calm overlay legend */
    .sl-map-card {
      position: absolute;
      top: 16px;
      right: 16px;
      z-index: 9999;
      background: rgba(255,255,255,0.88);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 14px;
      padding: 12px 14px;
      font-family: -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      box-shadow: 0 10px 26px rgba(0,0,0,0.10);
      line-height: 1.35;
      max-width: 340px;
    }
    .sl-map-title {
      font-size: 14px;
      font-weight: 600;
      margin: 0 0 6px 0;
    }
    .sl-map-sub {
      font-size: 12px;
      color: rgba(0,0,0,0.68);
      margin: 0 0 10px 0;
    }
    .sl-map-legend {
      display: grid;
      grid-template-columns: 12px 1fr;
      gap: 8px 10px;
      align-items: center;
      font-size: 12px;
      color: rgba(0,0,0,0.78);
    }
    .sl-swatch {
      width: 12px;
      height: 12px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.12);
    }
    .sl-swatch.low { background: #4c6fff; }
    .sl-swatch.mid { background: #34c759; }
    .sl-swatch.high { background: #ffd60a; }
    .sl-swatch.vhigh { background: #ff3b30; }
    .sl-map-foot {
      margin-top: 10px;
      font-size: 12px;
      color: rgba(0,0,0,0.60);
    }
  </style>
</head>
<body class="is-preload">

  <!-- Header -->
  <header class="sl-header">
    <div class="sl-header-inner">
      <a class="sl-brand" href="index.html">Sat Lav <span class="sl-brand-sub">Public Toilet Finder</span></a>
      <nav class="sl-nav" aria-label="Primary">
        <a class="active" href="index.html">Home</a>
        <a href="download.html">Download</a>
        <a href="data.html">Data</a>
        <a class=active href="coverage.html">Coverage</a>
        <a href="privacy.html">Privacy</a>
        <a href="support.html">Support</a>
      </nav>
    </div>
  </header>

  <div id="wrapper" class="divided">

    <section class="wrapper style1 align-left sl-section">
      <div class="inner sl-narrow">
        <h2>Coverage</h2>
        <p>Sat Lav currently maps public toilets across the United Kingdom. The map below shows the relative concentration of mapped locations.</p>

        <div class="sl-map-wrap" aria-label="Sat Lav UK coverage density map">
          <div id="coverageMap"></div>

          <div class="sl-map-card" role="note" aria-label="Coverage legend">
            <div class="sl-map-title">Coverage density</div>
            <div class="sl-map-sub">Colours show clustering density, not individual pins or data quality.</div>

            <div class="sl-map-legend" aria-label="Density key">
              <div class="sl-swatch low"></div><div>Low concentration</div>
              <div class="sl-swatch mid"></div><div>Moderate concentration</div>
              <div class="sl-swatch high"></div><div>High concentration</div>
              <div class="sl-swatch vhigh"></div><div>Very high concentration</div>
            </div>

            <div class="sl-map-foot" id="ptCount">Mapped locations: …</div>
          </div>
        </div>

        <p style="margin-top: 1.25rem; color: rgba(0,0,0,0.65); font-size: 0.95em;">
          Density largely follows population patterns and data availability. Coverage is continuously improving as sources are added and locations are verified.
        </p>
      </div>
    </section>

    <!-- Footer -->
    <footer class="wrapper style1 align-center">
      <div class="inner">
        <p class="sl-footer-links">
          <a href="privacy.html">Privacy</a> ·
          <a href="support.html">Support</a> ·
          <a href="data.html">Data</a> ·
          <a href="coverage.html">Coverage</a>
        </p>
        <p class="copyright">&copy; Sat Lav. All rights reserved. <span class="sl-muted">Contains data from ToiletMap UK (CC BY 4.0).</span></p>
      </div>
    </footer>

  </div>

  <!-- Scripts (site) -->
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/jquery.scrollex.min.js"></script>
  <script src="assets/js/jquery.scrolly.min.js"></script>
  <script src="assets/js/browser.min.js"></script>
  <script src="assets/js/breakpoints.min.js"></script>
  <script src="assets/js/util.js"></script>
  <script src="assets/js/main.js"></script>

  <!-- Leaflet -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>

  <script>
fetch('assets/coverage_points.json')
  .then(r => r.json())
  .then(points => {
    L.heatLayer(points, {
      radius: 16,
      blur: 20,
      maxZoom: 11
    }).addTo(map);

    document.getElementById('ptCount').textContent =
      'Mapped locations: ' + points.length.toLocaleString();
  })
  .catch(err => {
    console.error(err);
    document.getElementById('ptCount').textContent =
      'Unable to load coverage data.';
  });

    // Map init (UK centre)
    const map = L.map('coverageMap', { zoomControl: true }).setView([54.8, -2.5], 6);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Calmer public settings (you can tweak later)
    L.heatLayer(ALL_POINTS, {
      radius: 16,
      blur: 20,
      maxZoom: 11
    }).addTo(map);

    // Count label
    document.getElementById('ptCount').textContent = 'Mapped locations: ' + ALL_POINTS.length.toLocaleString();
  </script>

</body>
</html>